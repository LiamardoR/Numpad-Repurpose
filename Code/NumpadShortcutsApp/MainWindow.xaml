<Window x:Name="window" x:Class="NumpadShortcutsApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Numpad Shortcuts Setup"
        Height="700" Width="1100"
        Background="#121214" Foreground="#EBEBEE"
        WindowStartupLocation="CenterScreen">

	<Window.Resources>
		<DropShadowEffect x:Key="ShadowEffect" BlurRadius="14" ShadowDepth="4" Color="#000000" Opacity="0.45"/>

		<!-- Base button with hover animation -->
		<Style x:Key="BaseButton" TargetType="Button">
			<Setter Property="Foreground" Value="#EBEBEE"/>
			<Setter Property="Background" Value="#242A30"/>
			<Setter Property="BorderBrush" Value="#3C3C44"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="8"/>
			<Setter Property="Margin" Value="6"/>
			<Setter Property="Effect" Value="{StaticResource ShadowEffect}"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="Button">
						<Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsMouseOver" Value="True">
								<Trigger.EnterActions>
									<BeginStoryboard>
										<Storyboard>
											<ColorAnimation Storyboard.TargetName="border"
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#2F3640" Duration="0:0:0.15"/>
											<ColorAnimation Storyboard.TargetName="border"
                                                            Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                            To="#4F5B66" Duration="0:0:0.15"/>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.EnterActions>
								<Trigger.ExitActions>
									<BeginStoryboard>
										<Storyboard>
											<ColorAnimation Storyboard.TargetName="border"
                                                            Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#242A30" Duration="0:0:0.15"/>
											<ColorAnimation Storyboard.TargetName="border"
                                                            Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)"
                                                            To="#3C3C44" Duration="0:0:0.15"/>
										</Storyboard>
									</BeginStoryboard>
								</Trigger.ExitActions>
							</Trigger>
							<Trigger Property="IsPressed" Value="True">
								<Setter TargetName="border" Property="Background" Value="#3C4653"/>
								<Setter TargetName="border" Property="BorderBrush" Value="#6C7885"/>
							</Trigger>
							<Trigger Property="IsEnabled" Value="False">
								<Setter Property="Opacity" Value="0.6"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>

		<Style x:Key="NumpadButtonStyle" TargetType="Button" BasedOn="{StaticResource BaseButton}">
			<Setter Property="FontSize" Value="20"/>
			<Setter Property="MinWidth" Value="72"/>
			<Setter Property="MinHeight" Value="72"/>
			<Setter Property="Padding" Value="10"/>
		</Style>

		<Style x:Key="ActionButton" TargetType="Button" BasedOn="{StaticResource BaseButton}">
			<Setter Property="FontSize" Value="15"/>
			<Setter Property="MinWidth" Value="160"/>
			<Setter Property="MinHeight" Value="50"/>
		</Style>

		<Style x:Key="DarkCombo" TargetType="ComboBox">
			<Setter Property="Background" Value="#242A30"/>
			<Setter Property="Foreground" Value="Black"/>
			<!-- per request -->
			<Setter Property="BorderBrush" Value="#3C3C44"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="8"/>
			<Setter Property="Margin" Value="0,0,0,12"/>
			<Setter Property="MinHeight" Value="44"/>
		</Style>

		<Style x:Key="DarkTextBox" TargetType="TextBox">
			<Setter Property="Background" Value="#242A30"/>
			<Setter Property="Foreground" Value="#EBEBEE"/>
			<Setter Property="BorderBrush" Value="#3C3C44"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="8"/>
			<Setter Property="Margin" Value="0,0,0,12"/>
		</Style>

		<SolidColorBrush x:Key="PanelBg" Color="#1A1A1F"/>
		<SolidColorBrush x:Key="PanelBorder" Color="#3C3C44"/>
	</Window.Resources>

	<Grid Margin="20">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="560"/>
			<ColumnDefinition Width="20"/>
			<ColumnDefinition Width="*"/>
		</Grid.ColumnDefinitions>

		<!-- Header -->
		<Border Grid.Row="0" Grid.ColumnSpan="3"
        Background="#1C1C20" BorderBrush="{StaticResource PanelBorder}" BorderThickness="1"
        CornerRadius="12" Padding="14" Effect="{StaticResource ShadowEffect}" Margin="0,-14,-4,-15"
        RenderTransformOrigin="0.5,0.5" Grid.RowSpan="2">
			<Border.RenderTransform>
				<TransformGroup>
					<ScaleTransform/>
					<SkewTransform AngleY="-0.216"/>
					<RotateTransform/>
					<TranslateTransform Y="-1.996"/>
				</TransformGroup>
			</Border.RenderTransform>
			<DockPanel>
				<!-- Left: Title -->
				<StackPanel Orientation="Vertical" DockPanel.Dock="Left">
					<TextBlock Text="Numpad Shortcuts Setup" FontSize="22" FontWeight="SemiBold"/>
					<TextBlock Text="Dark theme — select a key to edit its action" 
                       Foreground="#AFAFB4" FontSize="12" Margin="0,4,0,0"/>
				</StackPanel>

				<!-- Right: Key badge + status light -->
				<StackPanel DockPanel.Dock="Right" Orientation="Horizontal" VerticalAlignment="Center">
					<!-- Status indicator ellipse -->
					<!-- Add inside the StackPanel DockPanel.Dock="Right" -->
                    <Ellipse x:Name="NumpadStatusEllipse" 
		 Width="16" Height="16" 
         Fill="Red" 
         Stroke="Black" 
         StrokeThickness="1" 
         VerticalAlignment="Center" 
         Margin="0,0,12,0"
         ToolTip="Device status: Not connected"/>


                    <Border Background="#2C344C" Padding="8,6" CornerRadius="8" Margin="6">
						<TextBlock x:Name="SelectedKeyBadge" Text="Key: None" Foreground="#EBEBEE"/>
					</Border>
				</StackPanel>
			</DockPanel>
		</Border>

		<!-- Numpad panel (left) -->
		<Border Grid.Row="1" Grid.Column="0" Background="{StaticResource PanelBg}" BorderBrush="{StaticResource PanelBorder}" BorderThickness="1"
                CornerRadius="12" Padding="16" Effect="{StaticResource ShadowEffect}" Margin="10,62,46,0">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="*"/>
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
					<RowDefinition Height="*"/>
				</Grid.RowDefinitions>

				<!-- Row 0 -->
				<Button Grid.Row="0" Grid.Column="0" Content="Num" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="0" Grid.Column="1" Content="/" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="0" Grid.Column="2" Content="*" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="0" Grid.Column="3" Content="-" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>

				<!-- Row 1 -->
				<Button Grid.Row="1" Grid.Column="0" Content="7" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="1" Grid.Column="1" Content="8" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="1" Grid.Column="2" Content="9" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="1" Grid.Column="3" Content="+" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click" Grid.RowSpan="2"/>

				<!-- Row 2 -->
				<Button Grid.Row="2" Grid.Column="0" Content="4" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="2" Grid.Column="1" Content="5" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="2" Grid.Column="2" Content="6" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>

				<!-- Row 3 -->
				<Button Grid.Row="3" Grid.Column="0" Content="1" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="3" Grid.Column="1" Content="2" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="3" Grid.Column="2" Content="3" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
				<Button Grid.Row="3" Grid.Column="3" Content="Enter" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click" Grid.RowSpan="2"/>

				<!-- Row 4 -->
				<Button Grid.Row="4" Grid.Column="0" Content="0" Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click" Grid.ColumnSpan="2"/>
				<Button Grid.Row="4" Grid.Column="2" Content="." Style="{StaticResource NumpadButtonStyle}" Click="NumpadButton_Click"/>
			</Grid>
		</Border>

		<!-- Action panel (right) -->
		<Border Grid.Row="1" Grid.Column="2" Background="{StaticResource PanelBg}" BorderBrush="{StaticResource PanelBorder}" BorderThickness="1"
                CornerRadius="12" Padding="20" Effect="{StaticResource ShadowEffect}">
			<StackPanel>
				<TextBlock Text="Action Type" Foreground="#2C344C" Margin="0,0,0,6"/>
				<ComboBox x:Name="ActionTypeComboBox" Style="{StaticResource DarkCombo}" SelectionChanged="ActionTypeComboBox_SelectionChanged">
					<ComboBoxItem Content="Open App"/>
					<ComboBoxItem Content="Play Sound"/>
				</ComboBox>

				<TextBlock x:Name="PathLabel" Text="Target / Path" Foreground="#AFAFB4" Margin="0,6,0,6"/>
				<DockPanel LastChildFill="True">
					<TextBox x:Name="TargetTextBox" Style="{StaticResource DarkTextBox}" MinHeight="60" />
					<Button x:Name="BrowseButton" Content="..." Style="{StaticResource ActionButton}" Click="BrowseButton_Click" DockPanel.Dock="Right" Margin="8,0,0,0" Width="20" />
				</DockPanel>

				<TextBlock Text="Arguments (optional)" Foreground="#AFAFB4" Margin="0,6,0,6"/>
				<TextBox x:Name="ArgumentsTextBox" Style="{StaticResource DarkTextBox}" MinHeight="120" Height="283" Width="416"/>

				<StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,18,0,0">
					<Button x:Name="TestButton" Content="Test Action" Style="{StaticResource ActionButton}" Click="TestButton_Click"/>
					<Button x:Name="SaveButton" Content="Save" Style="{StaticResource ActionButton}" Click="SaveButton_Click" Margin="10,0,0,0" Height="52"/>
				</StackPanel>
			</StackPanel>
		</Border>
	</Grid>
</Window>
